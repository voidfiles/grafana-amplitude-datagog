{"version":3,"sources":["../src/query_ctrl.js"],"names":["QueryCtrl","AmplitudeQueryCtrl","$scope","$injector","$q","uiSegmentSrv","target","event","eventSegment","newSegment","value","fake","custom","datasource","metricFindQuery","metricFindProps","panelCtrl","refresh","uniquePropCount","uniquePropCountSegment","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACQA,e,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;oCAEKC,kB;;;AAET,oCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,EAA/B,EAAmCC,YAAnC,EAAkD;AAAA;;AAAA,8IAC1CH,MAD0C,EAClCC,SADkC;;AAEhD,gBAAKE,YAAL,GAAoBA,YAApB;AACA,cAAI,MAAKC,MAAL,CAAYC,KAAhB,EAAuB;AACrB,kBAAKC,YAAL,GAAoB,IAAIH,aAAaI,UAAjB,CAClB,MAAKH,MAAL,CAAYC,KADM,CAApB;AAGD,WAJD,MAIO;AACL,kBAAKC,YAAL,GAAoB,IAAIH,aAAaI,UAAjB,CAA4B;AAC9CC,qBAAO,cADuC;AAE9CC,oBAAM,IAFwC;AAG9CC,sBAAQ;AAHsC,aAA5B,CAApB;AAKD;;AAb+C;AAejD;;;;sCAEW;AACV,mBAAO,KAAKC,UAAL,CAAgBC,eAAhB,EAAP;AACD;;;qCAEU;AACT,mBAAO,KAAKD,UAAL,CAAgBE,eAAhB,CACL,KAAKT,MAAL,CAAYC,KADP,CAAP;AAGD;;;yCAEc;AACb,iBAAKD,MAAL,CAAYC,KAAZ,GAAoB,KAAKC,YAAL,CAAkBE,KAAtC;AACA,iBAAKM,SAAL,CAAeC,OAAf;AACD;;;mDAEwB;AACvB,iBAAKX,MAAL,CAAYY,eAAZ,GAA8B,KAAKC,sBAAL,CAA4BT,KAA1D;AACA,iBAAKM,SAAL,CAAeC,OAAf;AACD;;;;QArCmCjB,S;;;;AAwCxCC,yBAAmBmB,WAAnB,GAAiC,4BAAjC","file":"query_ctrl.js","sourcesContent":["//import _ from 'lodash';\nimport {QueryCtrl} from 'app/plugins/sdk';\n\nexport class AmplitudeQueryCtrl extends QueryCtrl {\n\n    constructor($scope, $injector, $q, uiSegmentSrv)  {\n      super($scope, $injector);\n      this.uiSegmentSrv = uiSegmentSrv;\n      if (this.target.event) {\n        this.eventSegment = new uiSegmentSrv.newSegment(\n          this.target.event\n        );\n      } else {\n        this.eventSegment = new uiSegmentSrv.newSegment({\n          value: 'Select Event',\n          fake: true,\n          custom: false,\n        });\n      }\n\n    }\n\n    getEvents() {\n      return this.datasource.metricFindQuery();\n    }\n\n    getProps() {\n      return this.datasource.metricFindProps(\n        this.target.event\n      );\n    }\n\n    eventChanged() {\n      this.target.event = this.eventSegment.value;\n      this.panelCtrl.refresh();\n    }\n\n    uniquePropCountChanged() {\n      this.target.uniquePropCount = this.uniquePropCountSegment.value;\n      this.panelCtrl.refresh();\n    }\n}\n\nAmplitudeQueryCtrl.templateUrl = 'partials/query.editor.html';\n"]}