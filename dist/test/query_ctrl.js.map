{"version":3,"sources":["../../src/query_ctrl.js"],"names":["AmplitudeQueryCtrl","$scope","$injector","$q","uiSegmentSrv","target","event","eventSegment","newSegment","value","fake","custom","datasource","metricFindQuery","metricFindProps","panelCtrl","refresh","uniquePropCount","uniquePropCountSegment","templateUrl"],"mappings":";;;;;;;;;AACA;;;;;;+eADA;;;IAGaA,kB,WAAAA,kB;;;AAET,8BAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,EAA/B,EAAmCC,YAAnC,EAAkD;AAAA;;AAAA,wIAC1CH,MAD0C,EAClCC,SADkC;;AAEhD,UAAKE,YAAL,GAAoBA,YAApB;AACA,QAAI,MAAKC,MAAL,CAAYC,KAAhB,EAAuB;AACrB,YAAKC,YAAL,GAAoB,IAAIH,aAAaI,UAAjB,CAClB,MAAKH,MAAL,CAAYC,KADM,CAApB;AAGD,KAJD,MAIO;AACL,YAAKC,YAAL,GAAoB,IAAIH,aAAaI,UAAjB,CAA4B;AAC9CC,eAAO,cADuC;AAE9CC,cAAM,IAFwC;AAG9CC,gBAAQ;AAHsC,OAA5B,CAApB;AAKD;;AAb+C;AAejD;;;;gCAEW;AACV,aAAO,KAAKC,UAAL,CAAgBC,eAAhB,EAAP;AACD;;;+BAEU;AACT,aAAO,KAAKD,UAAL,CAAgBE,eAAhB,CACL,KAAKT,MAAL,CAAYC,KADP,CAAP;AAGD;;;mCAEc;AACb,WAAKD,MAAL,CAAYC,KAAZ,GAAoB,KAAKC,YAAL,CAAkBE,KAAtC;AACA,WAAKM,SAAL,CAAeC,OAAf;AACD;;;6CAEwB;AACvB,WAAKX,MAAL,CAAYY,eAAZ,GAA8B,KAAKC,sBAAL,CAA4BT,KAA1D;AACA,WAAKM,SAAL,CAAeC,OAAf;AACD;;;;;;AAGLhB,mBAAmBmB,WAAnB,GAAiC,4BAAjC","file":"query_ctrl.js","sourcesContent":["//import _ from 'lodash';\nimport {QueryCtrl} from 'app/plugins/sdk';\n\nexport class AmplitudeQueryCtrl extends QueryCtrl {\n\n    constructor($scope, $injector, $q, uiSegmentSrv)  {\n      super($scope, $injector);\n      this.uiSegmentSrv = uiSegmentSrv;\n      if (this.target.event) {\n        this.eventSegment = new uiSegmentSrv.newSegment(\n          this.target.event\n        );\n      } else {\n        this.eventSegment = new uiSegmentSrv.newSegment({\n          value: 'Select Event',\n          fake: true,\n          custom: false,\n        });\n      }\n\n    }\n\n    getEvents() {\n      return this.datasource.metricFindQuery();\n    }\n\n    getProps() {\n      return this.datasource.metricFindProps(\n        this.target.event\n      );\n    }\n\n    eventChanged() {\n      this.target.event = this.eventSegment.value;\n      this.panelCtrl.refresh();\n    }\n\n    uniquePropCountChanged() {\n      this.target.uniquePropCount = this.uniquePropCountSegment.value;\n      this.panelCtrl.refresh();\n    }\n}\n\nAmplitudeQueryCtrl.templateUrl = 'partials/query.editor.html';\n"]}